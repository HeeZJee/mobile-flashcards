"use strict";var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.clearLocalNotification=clearLocalNotification;exports.setLocalNotification=setLocalNotification;var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncStorage=_interopRequireDefault(require("@react-native-community/async-storage"));var Notifications=_interopRequireWildcard(require("expo-notifications"));var Permissions=_interopRequireWildcard(require("expo-permissions"));var NOTIFICATION_KEY='MobileFlashcard:notifications';function clearLocalNotification(){return _asyncStorage["default"].removeItem(NOTIFICATION_KEY).then(Notifications.cancelAllScheduledNotificationsAsync)["catch"](function(err){return console.error(err);});}function setLocalNotification(){_asyncStorage["default"].getItem(NOTIFICATION_KEY).then(JSON.parse).then(function(data){if(data===null){Permissions.askAsync(Permissions.NOTIFICATIONS).then(function _callee(_ref){var status,tomorrow;return _regenerator["default"].async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:status=_ref.status;if(status==="granted"){Notifications.cancelAllScheduledNotificationsAsync();tomorrow=new Date();tomorrow.setDate(tomorrow.getDate()+1);tomorrow.setHours(20);tomorrow.setMinutes(0);Notifications.scheduleNotificationAsync({content:{title:'Mobile Flashcards Reminder',body:"ðŸ‘‹ Don't forget to study for today!",ios:{sound:true},android:{channelId:"DailyReminder",sticky:false,color:'red'}},trigger:{seconds:(tomorrow.getTime()-Date.now())/1000}});_asyncStorage["default"].setItem(NOTIFICATION_KEY,JSON.stringify(true));}else{}case 2:case"end":return _context.stop();}}});});}});}