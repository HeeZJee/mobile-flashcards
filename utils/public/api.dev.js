"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.getData=getData;exports.getDecksOld=getDecksOld;exports.getDecks=getDecks;exports.getDeck=getDeck;exports.saveDeckTitleAS=saveDeckTitleAS;exports.addCardToDeckAS=addCardToDeckAS;var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncStorage=_interopRequireDefault(require("@react-native-community/async-storage"));var _DATA=require("./_DATA");var DECKS_STORAGE_KEY='MobileFlashcards:decks';function getData(){return _DATA.decks;}function formatDeckResults(results){return results===null?_DATA.decks:JSON.parse(results);}function getDecksOld(){return _asyncStorage["default"].getItem(DECKS_STORAGE_KEY).then(formatDeckResults);}function getDecks(){var storeResults;return _regenerator["default"].async(function getDecks$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return _regenerator["default"].awrap(_asyncStorage["default"].getItem(DECKS_STORAGE_KEY));case 3:storeResults=_context.sent;if(storeResults===null){_asyncStorage["default"].setItem(DECKS_STORAGE_KEY,JSON.stringify(_DATA.decks));}return _context.abrupt("return",storeResults===null?_DATA.decks:JSON.parse(storeResults));case 8:_context.prev=8;_context.t0=_context["catch"](0);console.log(_context.t0);case 11:case"end":return _context.stop();}}},null,null,[[0,8]]);}function getDeck(id){var storeResults;return _regenerator["default"].async(function getDeck$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return _regenerator["default"].awrap(_asyncStorage["default"].getItem(DECKS_STORAGE_KEY));case 3:storeResults=_context2.sent;return _context2.abrupt("return",JSON.parse(storeResults)[id]);case 7:_context2.prev=7;_context2.t0=_context2["catch"](0);console.log(_context2.t0);case 10:case"end":return _context2.stop();}}},null,null,[[0,7]]);}function saveDeckTitleAS(title){return _regenerator["default"].async(function saveDeckTitleAS$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return _regenerator["default"].awrap(_asyncStorage["default"].mergeItem(DECKS_STORAGE_KEY,JSON.stringify((0,_defineProperty2["default"])({},title,{title:title,questions:[]}))));case 3:_context3.next=8;break;case 5:_context3.prev=5;_context3.t0=_context3["catch"](0);console.log(_context3.t0);case 8:case"end":return _context3.stop();}}},null,null,[[0,5]]);}function addCardToDeckAS(title,question,answer){var deck;return _regenerator["default"].async(function addCardToDeckAS$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return _regenerator["default"].awrap(getDeck(title));case 3:deck=_context4.sent;_context4.next=6;return _regenerator["default"].awrap(_asyncStorage["default"].mergeItem(DECKS_STORAGE_KEY,JSON.stringify((0,_defineProperty2["default"])({},title,{questions:[].concat((0,_toConsumableArray2["default"])(deck.questions),[{question:question,answer:answer}])}))));case 6:_context4.next=11;break;case 8:_context4.prev=8;_context4.t0=_context4["catch"](0);console.log(_context4.t0);case 11:case"end":return _context4.stop();}}},null,null,[[0,8]]);}